<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Browsey">
  <title>Browsey</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="icon" href="/icons/icon-192.png" type="image/png">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header class="header">
    <button class="btn-icon" id="btn-back" aria-label="Go back">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 18l-6-6 6-6"/>
      </svg>
    </button>
    <div class="path-display" id="path-display">/</div>
    <button class="btn-icon" id="btn-search" aria-label="Search files">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
    </button>
    <button class="btn-icon" id="btn-refresh" aria-label="Refresh">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M23 4v6h-6"/><path d="M1 20v-6h6"/>
        <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
      </svg>
    </button>
  </header>

  <!-- Git Status Bar -->
  <div class="git-status-bar" id="git-status-bar" hidden>
    <div class="git-status-content">
      <span class="git-branch" id="git-branch"></span>
      <span class="git-state" id="git-state"></span>
    </div>
    <button class="btn-icon git-info-btn" id="git-info-btn" aria-label="Git info">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 16v-4"/>
        <path d="M12 8h.01"/>
      </svg>
    </button>
  </div>

  <!-- Git Info Modal -->
  <div class="git-modal-overlay" id="git-modal-overlay" hidden>
    <div class="git-modal">
      <div class="git-modal-header">
        <div class="git-modal-title">Git Repository</div>
        <button class="btn-icon" id="git-modal-close" aria-label="Close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="git-modal-content" id="git-modal-content"></div>
    </div>
  </div>

  <main class="file-list" id="file-list">
    <div class="loading" id="loading">Loading...</div>
  </main>

  <div class="toast" id="toast" hidden></div>

  <!-- File Viewer Modal -->
  <div class="viewer-overlay" id="viewer-overlay" hidden>
    <div class="viewer-header">
      <div class="viewer-filename" id="viewer-filename"></div>
      <div class="viewer-actions">
        <button class="btn-icon" id="viewer-font-decrease" aria-label="Decrease font size" hidden>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <text x="3" y="18" font-size="16" font-weight="600" fill="currentColor">A</text>
            <text x="15" y="18" font-size="14" font-weight="600" fill="currentColor">âˆ’</text>
          </svg>
        </button>
        <button class="btn-icon" id="viewer-font-increase" aria-label="Increase font size" hidden>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <text x="3" y="18" font-size="16" font-weight="600" fill="currentColor">A</text>
            <text x="15" y="18" font-size="14" font-weight="600" fill="currentColor">+</text>
          </svg>
        </button>
        <button class="btn-icon" id="viewer-prev" aria-label="Previous" hidden>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <button class="btn-icon" id="viewer-next" aria-label="Next" hidden>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
        <button class="btn-icon" id="viewer-download" aria-label="Download">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
        </button>
        <button class="btn-icon" id="viewer-close" aria-label="Close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="viewer-content" id="viewer-content"></div>
  </div>

  <!-- Info Modal -->
  <div class="info-overlay" id="info-overlay" hidden>
    <div class="info-modal">
      <div class="info-header">
        <div class="info-title" id="info-title">File Info</div>
        <button class="btn-icon" id="info-close" aria-label="Close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="info-content" id="info-content"></div>
    </div>
  </div>

  <!-- Search Overlay -->
  <div class="search-overlay" id="search-overlay" hidden>
    <div class="search-modal">
      <div class="search-header">
        <div class="search-input-wrapper">
          <svg class="search-input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <input type="text"
                 id="search-input"
                 class="search-input"
                 placeholder="Search files..."
                 autocomplete="off"
                 spellcheck="false">
        </div>
        <button class="btn-icon" id="search-close" aria-label="Close search">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="search-results" id="search-results">
        <div class="search-hint">Type to search files...</div>
      </div>
      <div class="search-footer">
        <span class="search-shortcut"><kbd>Enter</kbd> to select</span>
        <span class="search-shortcut"><kbd>Esc</kbd> to close</span>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
